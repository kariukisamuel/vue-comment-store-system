{"remainingRequest":"/home/samuel/Desktop/Lynk/commentsystem/node_modules/babel-loader/lib/index.js!/home/samuel/Desktop/Lynk/commentsystem/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/samuel/Desktop/Lynk/commentsystem/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/samuel/Desktop/Lynk/commentsystem/src/components/Comments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/samuel/Desktop/Lynk/commentsystem/src/components/Comments.vue","mtime":1574592928976},{"path":"/home/samuel/Desktop/Lynk/commentsystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuel/Desktop/Lynk/commentsystem/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/samuel/Desktop/Lynk/commentsystem/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuel/Desktop/Lynk/commentsystem/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFJlcGxpZXMgZnJvbSAiLi9SZXBsaWVzLnZ1ZSI7CmltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NvbW1lbnRzJywKICBjb21wb25lbnRzOiB7CiAgICBSZXBsaWVzOiBSZXBsaWVzCiAgfSwKICBwcm9wczogWydjb21tZW50JywgJ2RhdGUnLCAnY29tbWVudElkJ10sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlcGx5OiAnJywKICAgICAgcmVwbHlDb21tZW50Qm94OiBmYWxzZSwKICAgICAgZW1wdHlNZXNzYWdlOiAnJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjdXJyZW50RGF0ZTogZnVuY3Rpb24gY3VycmVudERhdGUoKSB7CiAgICAgIHJldHVybiBtb21lbnQoKS5mb3JtYXQoJ2xsbGwnKTsKICAgIH0sCiAgICBjb21tZW50czogZnVuY3Rpb24gY29tbWVudHMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5jb21tZW50czsKICAgIH0sCiAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5yZXBsaWVzOwogICAgfSwKICAgIGZpbHRlcmVkSXRlbXM6IGZ1bmN0aW9uIGZpbHRlcmVkSXRlbXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL2ZpbHRlciByZXBsaWVzIHRvIHRoZWlyIHJlc3BlY3RpdmUgY29tbWVudHMKICAgICAgdmFyIGZpbHRlckJ5SWQgPSBmdW5jdGlvbiBmaWx0ZXJCeUlkKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5jb21tZW50SWQgPT0gX3RoaXMuY29tbWVudElkKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgIH07CgogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucmVwbGllcy5maWx0ZXIoZmlsdGVyQnlJZCk7CiAgICB9LAogICAgcmVwbHlDb3VudDogZnVuY3Rpb24gcmVwbHlDb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnMucmVwbHlDb3VudDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dSZXBseUJveDogZnVuY3Rpb24gc2hvd1JlcGx5Qm94KCkgewogICAgICB0aGlzLnJlcGx5Q29tbWVudEJveCA9IHRydWU7CiAgICB9LAogICAgc3VibWl0UmVwbHk6IGZ1bmN0aW9uIHN1Ym1pdFJlcGx5KCkgewogICAgICAvKnRvIGVuc3VyZSBjb25zaXN0ZW5jeSBvZiB0aGUgcHJpbWFyeSBrZXkgaW4gYSBteXNxbCBtYW5uZXIgaSBpbmNyZW1lbnQKICAgICAgdGhlIGlkIG9mIHRoZSBsYXN0IG9iamVjdCBpbiB0aGUgcmVwbGllcyBhcnJheS4KICAgICAgKi8KICAgICAgdmFyIHJlcGxpZXNMZW5ndGggPSB0aGlzLnJlcGx5Q291bnQ7CiAgICAgIHZhciByZXBsaWVzQXJyYXkgPSB0aGlzLml0ZW1zOwogICAgICB2YXIgaWQ7CgogICAgICBpZiAocmVwbGllc0xlbmd0aCAtIDEgPT0gLTEpIHsKICAgICAgICBpZCA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWQgPSByZXBsaWVzQXJyYXlbcmVwbGllc0xlbmd0aCAtIDFdLnJlcGx5SWQgKyAxOwogICAgICB9CiAgICAgIC8qZW5zdXJlIG5vIGVtcHR5IHJlcGxpZXMgYXJlIHN1Ym1pdHRlZCovCgoKICAgICAgaWYgKHRoaXMucmVwbHkubGVuZ3RoIDwgMSkgewogICAgICAgIHRoaXMuZW1wdHlNZXNzYWdlID0gJ1lvdSBjYW50IHBvc3QgYW4gZW1wdHkgcmVwbHkuUGxlYXNlIHR5cGUgc29tZXRoaW5nJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVtcHR5TWVzc2FnZSA9ICcnOyAvL3VzaW5nIGNvbW1lbnRJZCB0byB0cmFjayBhbGwgcmVwbGllcyBiZWxvbmdpbmcgdG8gY29tbWVudCAgICAKCiAgICAgICAgdmFyIGxhdGVzdFJlcGx5ID0gewogICAgICAgICAgZGF0ZTogdGhpcy5jdXJyZW50RGF0ZSwKICAgICAgICAgIHJlcGx5OiB0aGlzLnJlcGx5LAogICAgICAgICAgY29tbWVudElkOiB0aGlzLmNvbW1lbnRJZCwKICAgICAgICAgIHJlcGx5SWQ6IGlkLAogICAgICAgICAgYWN0aXZlOiB0cnVlCiAgICAgICAgfTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FkZFJlcGx5JywgbGF0ZXN0UmVwbHkpOwogICAgICAgIHRoaXMucmVwbHkgPSAnJzsKICAgICAgfQogICAgfSwKICAgIHRyYXNoQ29tbWVudDogZnVuY3Rpb24gdHJhc2hDb21tZW50KGNvbW1lbnRJZCkgewogICAgICAvLyBwZXJmb3JtIGEgc29mdCBkZWxldGUgb24gY29tbWVudAogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NvZnREZWxldGVDb21tZW50JywgY29tbWVudElkKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Comments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAuBA,OAAA,OAAA;AACA,OAAA,KAAA,MAAA,MAAA,QAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GAFA;AAKA,EAAA,KAAA,EAAA,CAAA,SAAA,EAAA,MAAA,EAAA,WAAA,CALA;AAMA,EAAA,IANA,kBAMA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,eAAA,EAAA,KAFA;AAGA,MAAA,YAAA,EAAA;AAHA,KAAA;AAMA,GAbA;AAcA,EAAA,QAAA,EAAA;AAEA,IAAA,WAFA,yBAEA;AACA,aAAA,MAAA,GAAA,MAAA,CAAA,MAAA,CAAA;AACA,KAJA;AAKA,IAAA,QALA,sBAKA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA,KAPA;AAQA,IAAA,KARA,mBAQA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA;AACA,KAVA;AAWA,IAAA,aAXA,2BAWA;AAAA;;AACA;AACA,UAAA,UAAA,GAAA,SAAA,UAAA,CAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,SAAA,IAAA,KAAA,CAAA,SAAA,EAAA;AACA,iBAAA,IAAA;AACA;AACA,OAJA;;AAKA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,MAAA,CAAA,UAAA,CAAA;AAEA,KApBA;AAqBA,IAAA,UArBA,wBAqBA;AACA,aAAA,KAAA,MAAA,CAAA,OAAA,CAAA,UAAA;AACA;AAvBA,GAdA;AAwCA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,0BACA;AACA,WAAA,eAAA,GAAA,IAAA;AACA,KAHA;AAKA,IAAA,WALA,yBAKA;AACA;;;AAGA,UAAA,aAAA,GAAA,KAAA,UAAA;AACA,UAAA,YAAA,GAAA,KAAA,KAAA;AACA,UAAA,EAAA;;AACA,UAAA,aAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA;AACA,QAAA,EAAA,GAAA,CAAA;AACA,OAFA,MAEA;AACA,QAAA,EAAA,GAAA,YAAA,CAAA,aAAA,GAAA,CAAA,CAAA,CAAA,OAAA,GAAA,CAAA;AACA;AACA;;;AAEA,UAAA,KAAA,KAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,aAAA,YAAA,GAAA,oDAAA;AACA,OAFA,MAEA;AACA,aAAA,YAAA,GAAA,EAAA,CADA,CAEA;;AACA,YAAA,WAAA,GAAA;AACA,UAAA,IAAA,EAAA,KAAA,WADA;AAEA,UAAA,KAAA,EAAA,KAAA,KAFA;AAGA,UAAA,SAAA,EAAA,KAAA,SAHA;AAIA,UAAA,OAAA,EAAA,EAJA;AAKA,UAAA,MAAA,EAAA;AALA,SAAA;AAOA,aAAA,MAAA,CAAA,MAAA,CAAA,UAAA,EAAA,WAAA;AACA,aAAA,KAAA,GAAA,EAAA;AACA;AACA,KAlCA;AAmCA,IAAA,YAnCA,wBAmCA,SAnCA,EAmCA;AACA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,mBAAA,EAAA,SAAA;AAEA;AAvCA;AAxCA,CAAA","sourcesContent":["<template>\n    <div class=\"comment-listings\">\n        <div class=\"comment\">\n            <p>{{comment}}</p>\n            <div class=\"flex reply-delete-buttons\">\n                <span @click=\"showReplyBox\" ><i class=\"fas fa-reply\"></i>Reply</span>\n                <span @click=\"trashComment(commentId)\"><i class=\"fas fa-trash-alt\"></i>Delete</span>\n            </div>\n            <p class=\"date\">{{date}}\n            </p>\n\n            <div class=\"reply-comment-input\" v-show=\"replyCommentBox\">\n                <input type=\"text\" v-model=\"reply\">\n                <button @click=\"submitReply\">Submit</button>\n                <p class=\"danger\" v-if=\"emptyMessage\">{{emptyMessage}}</p>\n            </div>\n            <Replies v-for=\"(item,index) in filteredItems\" :key=\"'reply'+index\" :replies=\"item.reply\" :date=\"item.date \"\n                :replyId=\"item.replyId\"></Replies>\n\n        </div>\n    </div>\n</template>\n<script>\n    import Replies from './Replies.vue'\n    import * as moment from 'moment';\n    export default {\n        name: 'Comments',\n        components: {\n            Replies,\n        },\n        props: ['comment', 'date', 'commentId'],\n        data() {\n            return {\n                reply: '',\n                replyCommentBox: false,\n                emptyMessage:'',\n           \n            }\n        },\n        computed: {\n\n            currentDate() {\n                return moment().format('llll');\n            },\n            comments() {\n                return this.$store.state.comments\n            },\n            items() {\n                return this.$store.state.replies\n            },\n            filteredItems() {\n                //filter replies to their respective comments\n                 const filterById = (item) =>{\n                    if(item.commentId == this.commentId){\n                        return true;\n                    }\n                 }\n                return this.$store.state.replies.filter(filterById);\n\n            },\n            replyCount() {\n                return this.$store.getters.replyCount\n            },\n\n        },\n        methods: {\n            showReplyBox() {\n                this.replyCommentBox = true\n            },\n\n            submitReply() {\n                /*to ensure consistency of the primary key in a mysql manner i increment\n                the id of the last object in the replies array.\n                */\n                let repliesLength = this.replyCount;\n                let repliesArray = this.items;\n                let id;\n                if (repliesLength - 1 == -1) {\n                    id = 0;\n                } else {\n                    id = repliesArray[repliesLength - 1].replyId + 1;\n                }\n                /*ensure no empty replies are submitted*/\n\n                if (this.reply.length < 1) {\n                    this.emptyMessage = 'You cant post an empty reply.Please type something';\n                } else {\n                    this.emptyMessage = '';\n                //using commentId to track all replies belonging to comment    \n                let latestReply = {\n                    date: this.currentDate,\n                    reply: this.reply,\n                    commentId: this.commentId,\n                    replyId: id,\n                    active: true\n                }\n                this.$store.commit('addReply', latestReply)\n                this.reply = ''\n                }\n            },\n            trashComment(commentId){\n                // perform a soft delete on comment\n                this.$store.commit('softDeleteComment',commentId)\n    \n            }\n\n        }\n        }\n</script>\n<style lang=\"scss\" scoped>\n    .comment-listings {\n        .comment {\n            background: aliceblue;\n            padding: 1rem;\n            margin: 1rem 0;\n\n            .reply-delete-buttons {\n                span {\n                    padding: 0 2rem;\n                }\n            }\n\n            .reply-comment-input {\n                margin: 1rem 0;\n\n                input {\n                    width: 100%;\n                    height: 60px;\n                }\n\n                button {\n                    background-color: darkviolet;\n                    padding: 0.5rem;\n                    color: #fff;\n                    margin: 0.5rem 0;\n\n                }\n            }\n\n            .date {\n                text-align: end;\n                margin: 0\n            }\n\n        }\n\n    }\n</style>"],"sourceRoot":"src/components"}]}